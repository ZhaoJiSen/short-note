---
title: 注释
createTime: 2025/09/26 17:39:30
permalink: /rust/kn1r3ozu/
---

## 1. 普通注释

Rust 中管用注释是以两个斜杠开始注释，并持续到本行的结尾。对于超过一行的注释，需要在每一行前都加上 `//`

```rust
// So we’re doing something complicated here, long enough 
// that we need multiple lines of comments to do it!  
// Whew! Hopefully, this comment will explain what’s going on.
```

## 2. 文档注释

文档注释用 `///`（行）或 `/** ... */`（块），写在项目前，内容支持 Markdown，`cargo doc --open` 会生成 HTML 文档。

### 2.1 行文档注释 `///`

:::rust-repl title="函数文档注释"
```rust
/// 计算两数之和
/// # Examples
/// ```
/// let s = add(1, 2);
/// assert_eq!(s, 3);
/// ```
pub fn add(a: i32, b: i32) -> i32 {
    a + b
}
```
:::

### 2.2 模块/包级文档 `//!`

放在文件顶部，用 `//!` 描述整个模块或 crate。

:::rust-repl title="模块文档注释"
```rust
//! 数据库模块，封装连接与查询

/// 打开连接
pub fn connect(url: &str) {}
```
:::

> [!NOTE]
> - 文档注释里的代码块默认当做 Rust 代码，会被 `cargo test` 运行（Doc tests），保证示例可编译可运行。  
> - 需要插入非 Rust 片段时，在代码块标记语言名称，如 <code>```sh</code>。  
> - 常用 Markdown 小节：`# Examples`、`# Panics`、`# Errors`、`# Safety`（不安全函数）。 
