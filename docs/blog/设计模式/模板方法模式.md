---
title: 模板方法模式
tags:
  - 设计模式
createTime: 2026/02/27 15:50:39
permalink: /blog/jxhxb6jl/
---

模板方法模式在父类定义算法骨架，把可变步骤延迟到子类实现。

## 解决的问题

多个流程整体一致、局部实现不同。若每个类都复制完整流程，会产生重复代码。

## 结构组成

:::table full-width

| 角色 | 作用 |
| --- | --- |
| AbstractClass | 模板方法（流程骨架） |
| PrimitiveOperation | 可变步骤（抽象方法） |
| ConcreteClass | 步骤具体实现 |

:::

## 示例

```ts
abstract class DataSyncTemplate {
  // 模板方法：流程顺序固定
  run() {
    this.load()
    this.validate()
    this.transform()
    this.save()
  }

  protected abstract load(): void
  protected abstract transform(): void

  protected validate() {
    console.log('默认校验逻辑')
  }

  protected save() {
    console.log('写入数据库')
  }
}

class CsvSync extends DataSyncTemplate {
  protected load() {
    console.log('读取 CSV 文件')
  }
  protected transform() {
    console.log('CSV 数据清洗与映射')
  }
}

class ApiSync extends DataSyncTemplate {
  protected load() {
    console.log('拉取 API 数据')
  }
  protected transform() {
    console.log('API 字段转换')
  }
}

new CsvSync().run()
new ApiSync().run()
```

## 适用场景

- 流程固定、步骤可变的业务
- 导入导出、ETL、构建流水线

