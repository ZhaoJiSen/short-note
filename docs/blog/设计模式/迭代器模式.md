---
title: 迭代器模式
tags:
  - 设计模式
createTime: 2026/02/27 15:51:01
permalink: /blog/tup8y5mm/
---

迭代器模式提供统一遍历接口，使调用方无需知道集合内部结构。

## 解决的问题

集合内部结构可能变化（数组、链表、树），但遍历方式希望保持一致。

## 结构组成

:::table full-width

| 角色 | 作用 |
| --- | --- |
| Aggregate | 集合接口，创建迭代器 |
| Iterator | 迭代器接口 |
| ConcreteIterator | 具体迭代逻辑 |

:::

## 示例

```ts
class NameCollection implements Iterable<string> {
  constructor(private names: string[]) {}

  [Symbol.iterator](): Iterator<string> {
    let index = 0
    const data = this.names

    return {
      next(): IteratorResult<string> {
        if (index < data.length) {
          return { value: data[index++], done: false }
        }
        return { value: undefined, done: true }
      },
    }
  }
}

const names = new NameCollection(['alice', 'bob', 'carol'])

for (const name of names) {
  console.log(name)
}
```

## 适用场景

- 自定义数据结构遍历
- 对外隐藏集合内部实现细节
- 需要统一 `for...of` 消费体验

