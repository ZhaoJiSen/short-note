---
title: 外观模式
tags:
  - 设计模式
createTime: 2026/02/27 15:48:12
permalink: /blog/544em2py/
---

外观模式为一组复杂子系统提供一个统一入口，调用方只和外观交互。

## 解决的问题

当业务流程要串联多个模块（库存、支付、通知）时，调用方知道太多细节会导致耦合和重复代码。

## 结构组成

:::table full-width

| 角色 | 作用 |
| --- | --- |
| Facade | 对外暴露简化接口 |
| Subsystem | 真正执行工作的多个子系统 |

:::

## 示例

```ts
class InventoryService {
  check(skuId: string, count: number) {
    console.log('检查库存', skuId, count)
    return true
  }
}

class PaymentService {
  pay(orderId: string, amount: number) {
    console.log('支付成功', orderId, amount)
    return true
  }
}

class NotifyService {
  send(userId: string, message: string) {
    console.log('发送通知', userId, message)
  }
}

class OrderFacade {
  constructor(
    private inventory = new InventoryService(),
    private payment = new PaymentService(),
    private notify = new NotifyService(),
  ) {}

  submit(params: { orderId: string; skuId: string; count: number; amount: number; userId: string }) {
    const ok = this.inventory.check(params.skuId, params.count)
    if (!ok)
      throw new Error('库存不足')

    this.payment.pay(params.orderId, params.amount)
    this.notify.send(params.userId, '下单成功')
  }
}

new OrderFacade().submit({
  orderId: 'O-1001',
  skuId: 'SKU-1',
  count: 1,
  amount: 99,
  userId: 'U-1',
})
```

## 适用场景

- 需要对外提供简单 API 的复杂模块
- 历史系统整合和流程编排
- 前端页面“一个按钮触发多服务”的业务流程

