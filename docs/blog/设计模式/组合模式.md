---
title: 组合模式
tags:
  - 设计模式
createTime: 2026/02/27 15:48:22
permalink: /blog/2eppdj25/
---

组合模式把“整体-部分”结构统一成同一接口，调用方可以一致地处理单个对象和对象集合。

## 解决的问题

在目录树、菜单树、组织架构这类场景中，叶子节点和容器节点需要统一操作方式。

## 结构组成

:::table full-width

| 角色 | 作用 |
| --- | --- |
| Component | 统一接口 |
| Leaf | 叶子节点，无子节点 |
| Composite | 容器节点，可包含子节点 |

:::

## 示例

```ts
interface Node {
  render(indent?: number): void
}

class FileNode implements Node {
  constructor(private name: string) {}
  render(indent = 0) {
    console.log(`${' '.repeat(indent)}- ${this.name}`)
  }
}

class FolderNode implements Node {
  private children: Node[] = []
  constructor(private name: string) {}

  add(node: Node) {
    this.children.push(node)
  }

  render(indent = 0) {
    console.log(`${' '.repeat(indent)}+ ${this.name}`)
    this.children.forEach(child => child.render(indent + 2))
  }
}

const root = new FolderNode('src')
root.add(new FileNode('main.ts'))

const components = new FolderNode('components')
components.add(new FileNode('Button.tsx'))
components.add(new FileNode('Card.tsx'))

root.add(components)
root.render()
```

## 适用场景

- 树形结构建模
- 递归渲染组件
- 统一批处理叶子和容器节点

