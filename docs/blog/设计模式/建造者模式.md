---
title: 建造者模式
tags:
  - 设计模式
createTime: 2026/02/27 15:47:48
permalink: /blog/d9rnxlxa/
---

建造者模式用于“分步骤构建复杂对象”，把构建过程和最终对象分离。

## 解决的问题

当对象参数很多，且创建存在顺序和默认规则时，直接构造函数会很难读、很难维护。

## 结构组成

:::table full-width

| 角色 | 作用 |
| --- | --- |
| Builder | 定义构建步骤 |
| ConcreteBuilder | 实现步骤并持有中间状态 |
| Product | 最终产物 |

:::

## 示例

```ts
interface RequestConfig {
  url: string
  method: 'GET' | 'POST'
  headers: Record<string, string>
  timeout: number
  body?: unknown
}

class RequestBuilder {
  private config: RequestConfig

  constructor(url: string) {
    this.config = {
      url,
      method: 'GET',
      headers: {},
      timeout: 5000,
    }
  }

  setMethod(method: RequestConfig['method']) {
    this.config.method = method
    return this
  }

  addHeader(key: string, value: string) {
    this.config.headers[key] = value
    return this
  }

  setTimeout(ms: number) {
    this.config.timeout = ms
    return this
  }

  setBody(body: unknown) {
    this.config.body = body
    return this
  }

  build(): RequestConfig {
    if (this.config.method === 'GET' && this.config.body !== undefined) {
      throw new Error('GET 请求不应携带 body')
    }
    return this.config
  }
}

const req = new RequestBuilder('/api/user')
  .setMethod('POST')
  .addHeader('Content-Type', 'application/json')
  .setTimeout(8000)
  .setBody({ name: 'alice' })
  .build()

console.log(req)
```

## 适用场景

- 复杂参数对象构建
- 链式 API 设计
- 同一对象的多种组装方案

