---
title: 安装与基本配置
createTime: 2026/01/25 14:54:44
permalink: /vue/u9k2p8rq/
---

## 创建 Nuxt 项目

使用官方的脚手架即可创建一个 Nuxt 项目

:::code-tabs
@tab pnpm
```bash
pnpm create nuxt@latest <project-name>
```

@tab bun
```bash
bun create nuxt@latest <project-name>
```
:::

一个典型的 Nuxt 项目结构如下

::: file-tree

- hello-nuxt
  - assets       资源目录（参与打包处理，如 scss、图片）
  - components   组件目录（自动导入）
  - composables  组合式 API 目录（自动导入）
  - layouts      布局
  - middleware   路由中间件
  - server       Nitro 服务端路由/API
  - pages        页面目录，基于文件结构自动生成路由
    - index.vue  项目首页
  - plugins      插件目录
  - public       静态资源目录
  - app.vue      应用入口
  - app.config.ts  应用配置（defineAppConfig）
  - nuxt.config.ts Nuxt 框架配置（css、ssr、vite、app、modules 等）
  - package-lock.json 
  - package.json
  - README.md
  - tsconfig.json
  :::

:::details `package.json` 中的命令
1. `build: nuxt build`: 生成生产构建产物
2. `dev: nuxt dev`: 启动开发服务，支持 HMR 与调试
3. `generate: nuxt generate`: 生成静态站点（SSG）产物
4. `preview: nuxt preview`: 本地预览生产构建或静态产物
5. `postinstall: nuxt prepare`: 生成类型与自动导入
:::


## 应用入口

[+NuxtPage]: 相当于 `vue-router` 的 `RouterView`
[+NuxtLayout]: `NuxtLayout` 会根据页面的 `definePageMeta({ layout })` 切换布局，默认使用 `layouts/default.vue`

在 Nuxt 中 `App.vue` 会被视为应用的根入口，默认情况下 Nuxt 会为每个路由渲染页面内容，`App.vue` 通常负责决定 ==页面被包在什么结构里== 以及 ==入口处要做哪些全局事情==

:::details 常见用途
- 使用 `NuxtLayout`[+NuxtLayout] 定义页面布局或自定义布局骨架
- 使用 `NuxtPage`[+NuxtPage] 定义路由占位以渲染页面
- 使用 `beforeEach` 监听全局路由事件（不推荐，示例用途）
- 编写全局样式或引入全局样式
:::

如果创建了 `App.vue`，那么一定要保留 `NuxtPage`，否则页面不会渲染
```vue
<template>
  <NuxtLayout>
    <!-- 页面内容 -> vue-router -->
    <NuxtPage />
  </NuxtLayout>
</template>

<script lang="ts" setup>
const router = useRouter()

router.beforeEach((to, from) => {
  console.log('beforeEach', to, from)
})
</script>
```

> [!INFO]
> - 全局样式除了写在 `app.vue`，也可以通过 `nuxt.config.ts` 的 `css` 字段统一引入
> - 全局路由守卫在 Nuxt 中更推荐用 `middleware/*.global.ts`，这样 SSR/CSR 逻辑更一致


## 框架配置

框架配置 `nuxt.config.ts` 位于项目根目录，用于配置框架能力，例如 `css`、`vite`、`modules` 等，具体可以参考: <https://nuxt.com/docs/api/configuration/nuxt-config>

### 运行时配置

运行时配置（`runtimeConfig`）主要用于 =="运行时可变" 的配置==，可以调用 `useRuntimeConfig` 来获取运行时信息

> [!IMPORTANT]
> 服务端可以读取 `runtimeConfig` 中的全部字段；客户端只能读取 `public` 下的内容

:::code-tabs
@tab app.config.ts
```ts
export default defineNuxtConfig({
  runtimeConfig: {
    apiSecret: 'aabbcc', // 仅服务端
    public: {
      baseURL: 'https://api.example.com',
    },
  },
})
```

@tab app.vue
```vue
<script lang="ts" setup>
const config = useRuntimeConfig()

if (process.server) {
  console.log('API secret:', config.apiSecret)  // apiSecret 仅在 server 端存在
}
</script>
```
:::

> [!NOTE]
> - 在 Nuxt 中，最常用的环境判断是 `process.server` / `process.client`
> - 在 Vite 环境中也可以使用 `import.meta.server` / `import.meta.client`

### 应用配置

应用配置（`appConfig`） 用于 =="构建时确定" 的公共配置==，例如主题、品牌色等，可以调用 `useAppConfig` 来获取应用配置信息，应用配置可以写在 `nuxt.config.ts`，也可以独立放在 `app.config.ts`

:::code-tabs
@tab app.config.ts
```ts
export default defineAppConfig({
  theme: 'light',
})
```

@tab app.vue
```vue
<script lang="ts" setup>
const appConfig = useAppConfig()
</script>
```
:::


#### 在 env 定义环境变量

Nuxt 会读取项目根目录的 `.env` 文件，因此可以把环境变量放在这些文件里。这些环境变量可按不同环境被拆分：`.env`、`.env.local`、`.env.development`、`.env.production` 等

> [!TIP]
> `.env` 文件不会被打包进客户端代码，但 NUXT_PUBLIC_ 前缀的变量会暴露给浏览器，所以需要避免存放敏感信息

```bash
# .env
NUXT_API_SECRET=server_secret
NUXT_PUBLIC_BASE_URL=https://api.example.com
```

:::details 对应规则
- `NUXT_` 前缀：写入 `runtimeConfig`
- `NUXT_PUBLIC_` 前缀：写入 `runtimeConfig.public`
:::

### app 配置

这里的 `app` 指的是 `nuxt.config.ts` 中的 `app` 配置，最常用的是 `app.head`，用于配置**全局静态**的头部信息（`title` / `meta` / `link` / `script` / `style` 等）

:::code-tabs
@tab nuxt.config.ts
```ts
export default defineNuxtConfig({
  app: {
    head: {
      charset: 'utf-8',
      viewport: 'width=device-width, initial-scale=1',
      title: 'My App',
      titleTemplate: '%s · My App',
      meta: [
        { name: 'description', content: 'A Nuxt site' },
        { name: 'keywords', content: 'Nuxt, Vue, SSR' },
      ],
      link: [
        { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },
      ],
      script: [
        { src: 'https://example.com/analytics.js', body: true },
      ],
      style: [
        { children: 'body { color: #333; }' },
      ],
    },
  },
})
```
:::

> [!NOTE]
> - `charset` 建议使用 `utf-8`，避免编码问题
> - `viewport` 可按业务决定是否限制缩放
> - 大段样式更推荐写在 `assets` 或通过 `nuxt.config.ts` 的 `css` 引入

#### 动态 head（useHead）

需要动态或页面级别的 head 信息时，使用 `useHead` 更合适

```vue
<script lang="ts" setup>
const title = ref('文章详情')

useHead({
  title,
  meta: [
    { name: 'description', content: '文章内容简介' },
  ],
  bodyAttrs: {
    class: 'theme-light',
  },
})
</script>
```

#### 模板内置组件

在模板中也可以直接使用 `<Head>` / `<Title>` / `<Meta>` 等组件，语义直观，写起来更像 HTML

```vue
<template>
  <Head>
    <Title>关于我们</Title>
    <Meta name="description" content="公司介绍与团队信息" />
  </Head>
</template>
```

> [!IMPORTANT]
> head 的配置优先级：模板内置组件 > `useHead` > `app.head`

### SSR 配置

默认情况下 Nuxt 以 SSR 方式渲染页面，如果要全局切换为 SPA，可以在 `nuxt.config.ts` 中设置 `ssr: false`

#### 混合渲染（Hybrid Rendering）

Nuxt 支持按路由维度混合使用 SSR / SSG / CSR，让不同页面采用不同渲染策略

```ts
// nuxt.config.ts
export default defineNuxtConfig({
  routeRules: {
    '/': { prerender: true },     // 首页走 SSG
    '/admin/**': { ssr: false },  // 管理后台走 CSR
    '/blog/**': { isr: 60 },      // 文章页启用 ISR（秒）
  },
})
```

> [!TIP]
> - `prerender` 适合内容稳定的页面（营销页、文档页）
> - `ssr: false` 适合强交互、依赖浏览器 API 的页面
> - `isr` 适合内容会更新，但无需每次都实时 SSR 的页面
