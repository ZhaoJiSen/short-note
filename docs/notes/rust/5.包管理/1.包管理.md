---
title: 包管理
createTime: 2025/09/26 18:31:28
permalink: /rust/n40nc8u5/
---

## Crate 与 包

### Crate

`crate` 是 Rust 在编译时最小的代码单位，`crate` 有两种形式
- 二进制 `crate` 可以被编译为可执行程序，它们必须有一个 `main` 函数来作为执行入口
- 库 crate 没有 `main` 函数，也不会被编译为可执行程序，但它们定义了可供多个项目复用的功能模块


### 包

包是提供系列功能的一个或多个 `crate` 的捆绑。一个包会包含一个 `Cargo.toml` 文件，阐述如何去构建这些 `crate`

> [!NOTE]
> - `Cargo` 实际上就是一个包，它包含了用于构建代码的命令行工具的二进制 `crate`
> - 包中可以包含至多一个库 `crate` 或任意多个二进制 `crate`，但必须至少有一个

## 模块

模块（module）用于在 `crate` 内组织代码、控制可见性与重用。通过 `mod` 关键字声明模块，==模块内的项默认私有==，对外公开需使用 `pub`。

```rust
mod network {
    pub fn connect() {}

    mod client {
        pub fn request() {}
    }
}

fn main() {
    network::connect();
    network::client::request();
}
```

> [!NOTE]
> - `mod foo;` 会将同名的 `foo.rs` 或 `foo/mod.rs` 视为子模块源码
> - `pub` 只影响可见性，不改变所有权；嵌套模块默认私有，需要逐层 `pub` 才能被外部访问

