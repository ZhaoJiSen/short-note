---
title: 字面量联合与枚举
createTime: 2026/02/09 21:36:00
permalink: /typescript/literal-union-enum/
---

## 字面量类型

字面量类型表示“值级别”的约束。

```ts
let direction: 'left' | 'right'
direction = 'left'
// direction = 'up' // 报错
```

## 联合类型的判别式写法

判别式联合（Discriminated Union）是业务建模中的高频模式。

```ts
type ApiResult<T> =
  | { status: 'success'; data: T }
  | { status: 'error'; message: string }

function handle<T>(res: ApiResult<T>) {
  if (res.status === 'success') {
    return res.data
  }
  throw new Error(res.message)
}
```

## 互斥属性

```ts
type VipUser = {
  vip: true
  expiresAt: string
}

type NormalUser = {
  vip: false
  promotionCode: string
}

type User = VipUser | NormalUser
```

## 枚举（enum）

### 数字枚举

```ts
enum Status {
  Pending,
  Success,
  Failed,
}
```

数字枚举存在反向映射：

```ts
console.log(Status[0]) // 'Pending'
```

### 字符串枚举

```ts
enum HttpMethod {
  GET = 'GET',
  POST = 'POST',
}
```

字符串枚举没有反向映射。

## `const enum`

`const enum` 会在编译阶段被内联，减少运行时对象开销。

```ts
const enum Code {
  Ok = 200,
  NotFound = 404,
}

const code = Code.Ok
```

> [!WARNING]
> `const enum` 在部分构建链（如 `isolatedModules` 场景）会受限，跨包导出时需谨慎。

## 什么时候用联合，什么时候用枚举

- 偏类型约束、与字符串字面量联动时：优先联合类型
- 偏常量集合、需要统一命名空间时：可用 `enum`
- 现代前端项目中，“字面量联合 + 常量对象”通常更轻量

```ts
export const METHOD = {
  GET: 'GET',
  POST: 'POST',
} as const

export type Method = (typeof METHOD)[keyof typeof METHOD]
```
